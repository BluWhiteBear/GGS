<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <title>GG Studios - Blog Post Designer</title>
        <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />

        <link href="css/styles.css" rel="stylesheet" />
        <style>
            .form-group { margin-bottom: 1rem; }
            .section-container { 
                background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
                border: 1px solid rgba(255,255,255,0.1);
                padding: 1rem;
                margin-bottom: 1rem;
                border-radius: 0.5rem;
            }
            .change-container {
                background: linear-gradient(180deg, #2d2d2d 0%, #202020 100%);
                border: 1px solid rgba(255,255,255,0.1);
                padding: 1rem;
                margin-bottom: 1rem;
                border-radius: 0.5rem;
            }
            #outputJson {
                min-height: 200px;
                font-family: monospace;
                background: rgba(33, 37, 41, 0.95);
                color: #fff;
                border: 1px solid rgba(255,255,255,0.1);
                border-radius: 0.5rem;
            }
            .card {
                background: linear-gradient(180deg, #2d2d2d 0%, #1a1a1a 100%) !important;
                border: 1px solid rgba(255,255,255,0.1) !important;
                border-radius: 12px !important;
            }
            .accordion-button {
                background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%) !important;
                border: none !important;
            }
            .accordion-item {
                background: transparent !important;
                border: 1px solid rgba(255,255,255,0.1) !important;
            }
            .form-control {
                background: rgba(33, 37, 41, 0.95) !important;
                border: 1px solid rgba(255,255,255,0.1) !important;
                color: #fff !important;
            }
            .form-control:focus {
                box-shadow: 0 0 0 0.2rem rgba(255,255,255,0.25) !important;
            }
            #image-preview {
                background: rgba(33, 37, 41, 0.95);
                border: 1px solid rgba(255,255,255,0.1);
                border-radius: 12px;
                padding: 4px;
                pointer-events: none;
                position: fixed;
                z-index: 1000;
            }
            #image-preview img {
                max-width: 200px;
                max-height: 200px;
                border-radius: 8px;
            }
            .nav-link[data-bs-toggle="collapse"] {
                cursor: pointer;
            }
            .nav-link[data-bs-toggle="collapse"] .fas {
                transition: transform 0.2s ease-in-out;
            }
            .nav-link[data-bs-toggle="collapse"][aria-expanded="true"] .fas {
                transform: rotate(180deg);
            }
            .nav-link[data-bs-toggle="collapse"] .fa-folder {
                transition: transform 0.2s ease-in-out;
            }
            .nav-link[data-bs-toggle="collapse"][aria-expanded="true"] .fa-folder {
                transform: rotate(90deg);
            }
            .nav-item .nav {
                margin-left: 0.2rem;
                border-left: 1px solid rgba(255,255,255,0.1);
                padding-left: 0.2rem;
            }
            .preview-container {
                max-height: calc(100vh - 200px);
                overflow-y: auto;
            }
            #file-browser {
                font-size: 0.8rem;
            }
            
            #file-browser .nav-link {
                padding: 0.25rem 0.5rem;
            }
            
            .card-body.p-2 {
                padding: 0.5rem !important;
            }

            #blogPostForm {
                height: calc(100vh - 250px);
                overflow-y: auto;
            }

            #blogPostForm::-webkit-scrollbar {
                width: 8px;
            }

            #blogPostForm::-webkit-scrollbar-thumb {
                background: rgba(255,255,255,0.2);
                border-radius: 4px;
            }

            #blogPostForm::-webkit-scrollbar-track {
                background: rgba(0,0,0,0.2);
                border-radius: 4px;
            }

            #preview-container {
                height: calc(100vh - 300px);
                overflow-y: auto;
            }

            #preview-container::-webkit-scrollbar {
                width: 8px;
            }

            #preview-container::-webkit-scrollbar-thumb {
                background: rgba(255,255,255,0.2);
                border-radius: 4px;
            }

            #preview-container::-webkit-scrollbar-track {
                background: rgba(0,0,0,0.2);
                border-radius: 4px;
            }

            .card.h-100 {
                height: calc(100vh - 150px) !important;
                display: flex;
                flex-direction: column;
            }

            .card-body {
                flex: 1;
                display: flex;
                flex-direction: column;
                overflow: hidden;
            }

            .card-header {
                position: sticky;
                top: 0;
                z-index: 1;
                background-color: rgba(26, 26, 26, 0.95) !important;
                padding: 20px !important;
                border-radius: 12px 12px 0 0 !important;
                border-bottom: 1px solid rgba(255,255,255,0.1) !important;
            }

            .json-output-card {
                margin-bottom: 2rem;
            }

            .json-output-card .card-body {
                display: flex;
                flex-direction: column;
                height: 100%;
            }

            .json-output-card textarea {
                min-height: 300px !important;
                resize: vertical;
                margin-bottom: 1rem;
            }

            .json-output-card .button-group {
                display: flex;
                gap: 1rem;
                margin-top: auto;
            }

            .accordion-item {
                background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%) !important;
                border: 1px solid rgba(255,255,255,0.1) !important;
                border-radius: 12px !important;
                margin-bottom: 1rem;
            }

            .accordion-button {
                background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%) !important;
                border: none !important;
                border-radius: 12px !important;
                color: #fff !important;
                padding: 1rem !important;
            }

            .accordion-button:not(.collapsed) {
                box-shadow: none;
            }

            .accordion-button::after {
                filter: invert(1);
            }

            .form-control {
                background: rgba(33, 37, 41, 0.95) !important;
                border: 1px solid rgba(255,255,255,0.1) !important;
                color: #fff !important;
                border-radius: 8px;
            }

            .form-control:focus {
                background: rgba(33, 37, 41, 0.95) !important;
                border-color: rgba(255,255,255,0.2) !important;
                box-shadow: none;
                color: #fff;
            }

            .form-group label {
                color: #fff;
                margin-bottom: 0.5rem;
            }

            select.form-control {
                background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 16 16'%3e%3cpath fill='none' stroke='%23ffffff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m2 5 6 6 6-6'/%3e%3c/svg%3e") !important;
                background-repeat: no-repeat !important;
                background-position: right 0.75rem center !important;
                background-size: 16px 12px !important;
            }

            .btn-primary {
                border-radius: 20px;
                padding: 0.5rem 1.5rem;
            }
        </style>
        <script src="js/blogPostGen.js"></script>
        <script src="js/blogPostEditor.js"></script>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    </head>
    <body>
        <!-- Responsive navbar-->
        <div id="navbar-placeholder" class="fixed-top"></div>
        <div id="image-preview" style="display: none; position: fixed; z-index: 1000;"></div>
        <div style="padding-top: 90px"></div>

        <!-- Page Content-->
        <div class="container px-4 px-lg-5">
            <!-- Heading Row-->
            <div id="header-placeholder"></div>
            <script>
                document.addEventListener('DOMContentLoaded', () => {
                    loadHeader('header-placeholder', 'Blog Post Designer', 'Development Tool');
                });
            </script>

            <div class="row mt-4 dev-only d-none">
                <!-- File Browser Sidebar -->
                <div class="col-md-3 mb-4">
                    <div class="card text-white h-100">
                        <div class="card-header">
                            <h5 class="mb-0">Image Browser</h5>
                        </div>
                        <div class="card-body p-2">
                            <div class="nav flex-column w-100" id="file-browser">
                                <!-- Populated by JavaScript -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main content area -->
                <div class="col-md-9">
                    <div class="row g-4">
                        <!-- Form Column -->
                        <div class="col-md-5">
                            <div class="card text-white h-100">
                                <div class="card-header">
                                    <h5 class="mb-0">Blog Post Info</h5>
                                </div>
                                <div class="card-body accordion" id="blogPostForm">
                                    <!-- Basic Info -->
                                    <div class="accordion-item bg-dark text-white">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button text-white bg-dark" type="button" data-bs-toggle="collapse" data-bs-target="#basicInfo">
                                                Basic Information
                                            </button>
                                        </h2>
                                        <div id="basicInfo" class="accordion-collapse collapse" data-bs-parent="#blogPostForm">
                                            <div class="accordion-body">
                                                <!-- Existing form fields for basic info -->
                                                <!-- ... -->
                                                <div class="form-group">
                                                    <label for="blogType">Blog Type</label>
                                                    <select class="form-control" id="blogType">
                                                        <option value="hex">Hex VR</option>
                                                        <option value="site">Site</option>
                                                    </select>
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="headerImg">Header Image Path</label>
                                                    <input type="text" class="form-control" id="headerImg" placeholder="assets/img/header.jpg">
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="type">Update Type</label>
                                                    <select class="form-control" id="type">
                                                        <option value="Major Update">Major Update</option>
                                                        <option value="Minor Update">Minor Update</option>
                                                        <option value="Hotfix">Hotfix</option>
                                                    </select>
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="version">Version</label>
                                                    <input type="text" class="form-control" id="version" placeholder="B0.7.XXX">
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="date">Date</label>
                                                    <input type="text" class="form-control" id="date" placeholder="1/3/2025">
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="title">Title</label>
                                                    <input type="text" class="form-control" id="title">
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="author">Author</label>
                                                    <input type="text" class="form-control" id="author">
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="devNotes">Developer Notes</label>
                                                    <textarea class="form-control" id="devNotes" rows="3"></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Sections -->
                                    <div class="accordion-item bg-dark text-white">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button text-white bg-dark" type="button" data-bs-toggle="collapse" data-bs-target="#sectionsArea">
                                                Sections
                                            </button>
                                        </h2>
                                        <div id="sectionsArea" class="accordion-collapse collapse" data-bs-parent="#blogPostForm">
                                            <div class="accordion-body">
                                                <!-- Existing sections container -->
                                                <!-- ... -->
                                                <div id="sectionsContainer">
                                                    <h3>Sections</h3>
                                                </div>
                    
                                                <button class="btn btn-outline-light mb-3" onclick="addSection()">Add Section</button>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Media -->
                                    <div class="accordion-item bg-dark text-white">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button text-white bg-dark" type="button" data-bs-toggle="collapse" data-bs-target="#mediaArea">
                                                Media
                                            </button>
                                        </h2>
                                        <div id="mediaArea" class="accordion-collapse collapse" data-bs-parent="#blogPostForm">
                                            <div class="accordion-body">
                                                <!-- Existing media fields -->
                                                <!-- ... -->
                                                <div class="form-group">
                                                    <label for="mediaUrl">Media URL (optional)</label>
                                                    <input type="text" class="form-control" id="mediaUrl">
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="videoUrl">Video URL (optional)</label>
                                                    <input type="text" class="form-control" id="videoUrl">
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="mediaType">Media Type</label>
                                                    <select class="form-control" id="mediaType">
                                                        <option value="image">Image</option>
                                                        <option value="video">Video</option>
                                                    </select>
                                                </div>
                    
                                                <div class="form-group">
                                                    <label for="downloadUrl">Download URL (optional)</label>
                                                    <input type="text" class="form-control" id="downloadUrl" value="https://www.meta.com/en-gb/experiences/7202337956544173/">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <!-- This button forces the Live Preview to Update, as well as the JSON -->
                                        <button class="btn btn-outline-light" onclick="updatePreview()">Update Preview</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Preview Column -->
                        <div class="col-md-7">
                            <div class="card text-white h-100">
                                <div class="card-header">
                                    <h5 class="mb-0">Preview</h5>
                                </div>
                                <div class="card-body">
                                    <div id="preview-container" class="preview-container"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- JSON Output Section -->
            <div class="card text-white col-md-12 json-output-card">
                <div class="card-body">
                    <textarea class="form-control" id="outputJson"></textarea>
                    <div class="button-group">
                        <button class="btn btn-outline-light px-4" onclick="updatePreview()" style="border-radius: 20px;">Update JSON</button>
                        <button class="btn btn-outline-light px-4" onclick="generateJson()" style="border-radius: 20px;">Download JSON</button>
                    </div>
                </div>
            </div>
        
            <!-- Social Media-->
            <div id="socials-placeholder"></div>
        </div>
        <!-- Footer-->
        <div id="footer-placeholder"></div>
        <script src="js/scripts.js" defer></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    </body>
</html>